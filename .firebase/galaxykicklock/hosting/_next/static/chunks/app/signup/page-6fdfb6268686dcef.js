(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[879],{724:(e,t,s)=>{Promise.resolve().then(s.bind(s,9349))},9349:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>d});var r=s(5155),a=s(2115),n=s(5695),i=s(6302),l=s(6874),o=s.n(l),c=s(5799);s(5716);let u=(0,i.UU)("https://sarsafeqetopciqjhzrt.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InNhcnNhZmVxZXRvcGNpcWpoenJ0Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3MzIzNTAwOTEsImV4cCI6MjA0NzkyNjA5MX0.cvIbQn7UbCrvjDVzA4-bB-UCsHM9gp9i1uVFWtPlH9c");function d(){let[e,t]=(0,a.useState)(""),[s,i]=(0,a.useState)(""),[l,d]=(0,a.useState)(""),[m,h]=(0,a.useState)(!1),f=(0,n.useRouter)(),p=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"error";c.oR[t](e,{position:"top-right",autoClose:3e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,theme:"dark"})},x=async e=>{try{let{data:t,error:s}=await u.from("tokengenerate").select("*").eq("token",e);if(s)return p("Token verification failed. Please try again."),!1;if(!t||0===t.length)return p("Invalid token provided."),!1;t.length>1&&console.warn("Multiple tokens found for the same token value. Using the first one.");let r=t[0];if("InUse"===r.status)return p("Token has already been used."),!1;return!0}catch(e){return p("An unexpected error occurred during token verification."),!1}},g=async(e,t)=>{try{let{error:s}=await u.from("tokengenerate").update({userid:t}).eq("token",e).select();if(s){p("Error associating token with user.");return}}catch(e){p("Error associating token with user.")}},b=async r=>{if(r.preventDefault(),!m){h(!0);try{if(!e.trim()||!s.trim()){p("Username and password cannot be empty.");return}if(!l.trim()){p("Token cannot be empty.");return}if(!await x(l))return;let{data:r,error:a}=await u.from("users").insert([{username:e,password:s,token:l}]).select().single();if(a&&"23505"===a.code){p("Username already taken. Please try a different one.");return}if(a){p("Error: "+(a.message||"Failed to create user"));return}let n=r.id;await g(l,n);let{error:o}=await u.from("tokengenerate").update({status:"InUse"}).eq("token",l);if(o){p("Error updating token status.");return}p("Signup successful!","success"),setTimeout(()=>{t(""),i(""),d(""),f.push("/signin")},2e3)}catch(e){p("An unexpected error occurred.")}finally{h(!1)}}};return(0,r.jsxs)("div",{className:"welcome-container",children:[(0,r.jsx)(c.N9,{}),(0,r.jsxs)("div",{className:"auth-card max-w-md w-full p-8",children:[(0,r.jsx)("h1",{className:"text-center mb-8",children:(0,r.jsx)("span",{style:{color:"#D32F2F",fontFamily:"Audiowide, cursive",fontSize:"2rem",textShadow:"0 0 10px rgba(211, 47, 47, 0.3)"},children:"KICK ~ LOCK"})}),(0,r.jsxs)("form",{onSubmit:b,className:"space-y-6",children:[(0,r.jsxs)("div",{className:"form-group",children:[(0,r.jsx)("label",{className:"block text-white text-sm font-semibold mb-2 text-left w-full",children:"Username"}),(0,r.jsx)("input",{type:"text",value:e,onChange:e=>t(e.target.value),className:"input-field",placeholder:"Enter username",disabled:m})]}),(0,r.jsxs)("div",{className:"form-group",children:[(0,r.jsx)("label",{className:"block text-white text-sm font-semibold mb-2 text-left w-full",children:"Password"}),(0,r.jsx)("input",{type:"password",value:s,onChange:e=>i(e.target.value),className:"input-field",placeholder:"Enter password",disabled:m})]}),(0,r.jsxs)("div",{className:"form-group",children:[(0,r.jsx)("label",{className:"block text-white text-sm font-semibold mb-2 text-left w-full",children:"Token"}),(0,r.jsx)("input",{type:"text",value:l,onChange:e=>d(e.target.value),className:"input-field",placeholder:"Enter token",disabled:m})]}),(0,r.jsx)("button",{type:"submit",className:"welcome-button w-full mt-6",disabled:m,children:m?"Signing up...":"Sign Up"})]}),(0,r.jsx)("div",{className:"mt-6 text-center",children:(0,r.jsx)(o(),{href:"/signin",className:"text-primary-color hover:text-secondary-color transition-colors",children:"Already have an account? Sign in"})})]})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[454,948,874,542,441,684,358],()=>t(724)),_N_E=e.O()}]);