(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[636],{1544:(e,t,a)=>{Promise.resolve().then(a.bind(a,7854))},3109:e=>{e.exports={container:"GalaxyControl_container__lztoL",title:"GalaxyControl_title__XoJXH",kickLock:"GalaxyControl_kickLock__Oj_hs",formContainer:"GalaxyControl_formContainer__Y_gZR",logoutButton:"GalaxyControl_logoutButton__J9PxV",tabsContainer:"GalaxyControl_tabsContainer__MJxHS",tabButton:"GalaxyControl_tabButton__bd_uA",activeTab:"GalaxyControl_activeTab__Z5AM2",formContent:"GalaxyControl_formContent__8438X",fadeIn:"GalaxyControl_fadeIn__MnWN1",form:"GalaxyControl_form__qrC94",buttonGroup:"GalaxyControl_buttonGroup__OQoIy",input:"GalaxyControl_input__y75S6",timeInput:"GalaxyControl_timeInput__KJiqS",button:"GalaxyControl_button__OPSib",loadingButton:"GalaxyControl_loadingButton__adVBH",loading:"GalaxyControl_loading__7izA5"}},7854:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>C});var n=a(5155),s=a(5695),o=a(2115),r=a(6302),i=a(5799);a(5716);let l=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),c=function(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return t.filter((e,t,a)=>!!e&&""!==e.trim()&&a.indexOf(e)===t).join(" ").trim()};var d={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let u=(0,o.forwardRef)((e,t)=>{let{color:a="currentColor",size:n=24,strokeWidth:s=2,absoluteStrokeWidth:r,className:i="",children:l,iconNode:u,...p}=e;return(0,o.createElement)("svg",{ref:t,...d,width:n,height:n,stroke:a,strokeWidth:r?24*Number(s)/Number(n):s,className:c("lucide",i),...p},[...u.map(e=>{let[t,a]=e;return(0,o.createElement)(t,a)}),...Array.isArray(l)?l:[l]])}),p=(e,t)=>{let a=(0,o.forwardRef)((a,n)=>{let{className:s,...r}=a;return(0,o.createElement)(u,{ref:n,iconNode:t,className:c("lucide-".concat(l(e)),s),...r})});return a.displayName="".concat(e),a},h=p("Play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]]),g=p("Square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]),m=p("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]),x=p("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]),y=p("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);var f=a(3109),b=a.n(f);let k=()=>{let e=(0,s.useRouter)(),[t,a]=(0,o.useState)(1),[r,i]=(0,o.useState)(null),[l,c]=(0,o.useState)(!1),[d,u]=(0,o.useState)(!1),[p,f]=(0,o.useState)(!1),[k,v]=(0,o.useState)(""),[j,C]=(0,o.useState)(!1),[S,_]=(0,o.useState)(!0),[w,N]=(0,o.useState)(!1),I={1:"Kick 1",2:"Kick 2",3:"Kick 3",4:"Kick 4",5:"Kick 5"},T=async()=>{if(j)try{f(!0);let e=await fetch("https://buddymaster77hugs-gradio1.hf.space/api/undeploy",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({modal_name:r})});if(!e.ok){let t=await e.json();alert("Undeployment failed: ".concat(t.message||"Unknown error"));return}C(!1),v(""),c(!1),N(!1)}catch(e){alert("Undeployment error: ".concat(e instanceof Error?e.message:"Unknown error"));return}finally{f(!1)}sessionStorage.clear(),e.push("/signin")};(0,o.useEffect)(()=>{let e=sessionStorage.getItem("username");e?(i(e),R(e)):_(!1)},[]);let R=async e=>{_(!0);let t=!1;try{let a=await fetch("https://buddymaster77hugs-gradio1.hf.space/api/status",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({modal_name:e})});if(a.ok){let e=await a.json();"deployed"===e.status&&(t=!0,C(!0))}}catch(e){console.error("Error checking deployment status:",e)}finally{_(!1),c(!t)}},U=async()=>{if(!r){alert("Username not found. Please log in again.");return}f(!0);try{let e=await fetch("https://buddymaster77hugs-gradio1.hf.space/api/undeploy",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({modal_name:r})});if(e.ok)C(!1),N(!0);else{let t=await e.json();alert("Undeployment failed: ".concat(t.message||"Unknown error"))}}catch(e){alert("Undeployment error: ".concat(e instanceof Error?e.message:"Unknown error"))}finally{f(!1)}},L=async()=>{if(!r){alert("Username not found. Please log in again.");return}u(!0);try{let e=await fetch("https://buddymaster77hugs-gradio1.hf.space/api/deploy",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({repo_url:"https://github.com/octocat/Hello-World.git",modal_name:r})});if(e.ok)v("Successfully deployed"),C(!0),setTimeout(()=>{c(!1)},2e3);else{let t=await e.json();v("Deployment failed: ".concat(t.message||"Unknown error"))}}catch(e){v("Deployment error: ".concat(e instanceof Error?e.message:"Unknown error"))}finally{u(!1)}},[O,P]=(0,o.useState)({RC:"",Rival:"",AttackTime:"",IntervalTime:"",DefenceTime:"",PlanetName:""}),[z,A]=(0,o.useState)({RC:"",Rival:"",AttackTime:"",IntervalTime:"",DefenceTime:"",PlanetName:""}),[G,B]=(0,o.useState)({RC:"",Rival:"",AttackTime:"",IntervalTime:"",DefenceTime:"",PlanetName:""}),[D,J]=(0,o.useState)({RC:"",Rival:"",AttackTime:"",IntervalTime:"",DefenceTime:"",PlanetName:""}),[E,M]=(0,o.useState)({RC:"",Rival:"",AttackTime:"",IntervalTime:"",DefenceTime:"",PlanetName:""}),[W,K]=(0,o.useState)({start:{loading:!1,active:!1,text:"Start"},stop:{loading:!1,active:!1,text:"Stop"},update:{loading:!1,active:!1,text:"Update"}}),[q,H]=(0,o.useState)({start:{loading:!1,active:!1,text:"Start"},stop:{loading:!1,active:!1,text:"Stop"},update:{loading:!1,active:!1,text:"Update"}}),[V,X]=(0,o.useState)({start:{loading:!1,active:!1,text:"Start"},stop:{loading:!1,active:!1,text:"Stop"},update:{loading:!1,active:!1,text:"Update"}}),[Z,F]=(0,o.useState)({start:{loading:!1,active:!1,text:"Start"},stop:{loading:!1,active:!1,text:"Stop"},update:{loading:!1,active:!1,text:"Update"}}),[Y,Q]=(0,o.useState)({start:{loading:!1,active:!1,text:"Start"},stop:{loading:!1,active:!1,text:"Stop"},update:{loading:!1,active:!1,text:"Update"}}),[$,ee]=(0,o.useState)(""),[et,ea]=(0,o.useState)(""),[en,es]=(0,o.useState)(""),[eo,er]=(0,o.useState)(""),[ei,el]=(0,o.useState)(""),ec=e=>t=>{let{name:a,value:n}=t.target;if(["AttackTime","IntervalTime","DefenceTime"].includes(a)){let t=n.replace(/\D/g,"").slice(0,5);switch(e){case 1:P(e=>({...e,[a]:t}));break;case 2:A(e=>({...e,[a]:t}));break;case 3:B(e=>({...e,[a]:t}));break;case 4:J(e=>({...e,[a]:t}));break;case 5:M(e=>({...e,[a]:t}))}}else switch(e){case 1:P(e=>({...e,[a]:n}));break;case 2:A(e=>({...e,[a]:n}));break;case 3:B(e=>({...e,[a]:n}));break;case 4:J(e=>({...e,[a]:n}));break;case 5:M(e=>({...e,[a]:n}))}},ed=e=>async t=>{let a=(()=>{switch(e){case 1:default:return K;case 2:return H;case 3:return X;case 4:return F;case 5:return Q}})(),n=(()=>{switch(e){case 1:default:return ee;case 2:return ea;case 3:return es;case 4:return er;case 5:return el}})(),s=(()=>{switch(e){case 1:default:return O;case 2:return z;case 3:return G;case 4:return D;case 5:return E}})();a(e=>({...e,[t]:{...e[t],loading:!0}})),n("");try{let o=Object.entries(s).reduce((t,a)=>{let[n,s]=a;return t["".concat(n).concat(e)]=s,t},{});(await fetch("https://bharani77--".concat(r,"-web-app.modal.run/").concat(t,"/").concat(e),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)})).ok?(a(e=>({...e,[t]:{loading:!1,active:!0,text:"start"===t?"Running":"stop"===t?"Stopped":"Updated"},..."start"===t?{stop:{...e.stop,active:!1,text:"Stop"}}:{},..."stop"===t?{start:{...e.start,active:!1,text:"Start"}}:{}})),n("")):(n("start"===t?"Unable to start - Please try again":"Unable to ".concat(t," - Please try again")),a(e=>({...e,[t]:{...e[t],loading:!1,active:!1,text:t}})))}catch(e){n("Unable to ".concat(t," - Please try again")),a(e=>({...e,[t]:{...e[t],loading:!1,active:!1,text:t}}))}},eu=e=>{let a=(()=>{switch(e){case 1:default:return O;case 2:return z;case 3:return G;case 4:return D;case 5:return E}})(),s=(()=>{switch(e){case 1:default:return W;case 2:return q;case 3:return V;case 4:return Z;case 5:return Y}})(),o=(()=>{switch(e){case 1:default:return $;case 2:return et;case 3:return en;case 4:return eo;case 5:return ei}})(),r=[{key:"RC",type:"text",maxLength:void 0,className:b().input},{key:"Rival",type:"text",maxLength:void 0,className:b().input},{key:"AttackTime",type:"text",maxLength:5,className:"".concat(b().input," ").concat(b().timeInput)},{key:"IntervalTime",type:"text",maxLength:5,className:"".concat(b().input," ").concat(b().timeInput)},{key:"DefenceTime",type:"text",maxLength:5,className:"".concat(b().input," ").concat(b().timeInput)},{key:"PlanetName",type:"text",maxLength:void 0,className:b().input}];return(0,n.jsxs)("div",{className:b().formContent,style:{display:t===e?"block":"none"},children:[o&&(0,n.jsx)("div",{className:"text-red-500 mb-4",children:o}),(0,n.jsxs)("div",{className:b().form,children:[r.map(t=>{let{key:s,type:o,maxLength:r,className:i}=t;return(0,n.jsx)("input",{type:o,name:s,value:a[s],onChange:ec(e),placeholder:"".concat(s),className:i,maxLength:r},s)}),(0,n.jsxs)("div",{className:b().buttonGroup,style:{gap:"8px",display:"flex",flexWrap:"wrap"},children:[(0,n.jsxs)("button",{type:"button",onClick:()=>ed(e)("start"),className:"".concat(b().button," ").concat(s.start.loading?b().loadingButton:""," \n                ").concat(s.start.active?b().buttonRunning:""),disabled:s.start.loading,style:{backgroundColor:s.start.active?"#22c55e":void 0},children:[(0,n.jsx)(h,{size:16}),(0,n.jsx)("span",{children:"Start"})]}),(0,n.jsxs)("button",{type:"button",onClick:()=>ed(e)("stop"),className:"".concat(b().button," ").concat(s.stop.loading?b().loadingButton:""," \n                ").concat(s.stop.active?b().buttonStopped:""),disabled:s.stop.loading,children:[(0,n.jsx)(g,{size:16}),(0,n.jsx)("span",{children:"Stop"})]}),(0,n.jsxs)("button",{type:"button",onClick:()=>ed(e)("update"),className:"".concat(b().button," ").concat(s.update.loading?b().loadingButton:""," \n                ").concat(s.update.active?b().buttonUpdated:""),disabled:s.update.loading,children:[(0,n.jsx)(m,{size:16}),(0,n.jsx)("span",{children:"Update"})]}),ep()]})]})]})},ep=()=>S?(0,n.jsxs)("button",{className:"".concat(b().button),disabled:!0,style:{minWidth:"120px",backgroundColor:"#666"},children:[(0,n.jsx)(m,{size:16}),(0,n.jsx)("span",{children:"Checking..."})]}):j?(0,n.jsx)("button",{onClick:U,disabled:p,className:"".concat(b().button),style:{minWidth:"120px",backgroundColor:"#22c55e",border:"none"},children:p?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(m,{size:16}),(0,n.jsx)("span",{children:"Undeploying..."})]}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(x,{size:16}),(0,n.jsx)("span",{children:"Deployed"})]})}):(0,n.jsxs)("button",{onClick:()=>c(!0),className:"".concat(b().button),style:{minWidth:"120px",backgroundColor:"#dc2626",border:"none"},children:[(0,n.jsx)(m,{size:16}),(0,n.jsx)("span",{children:"Deploy"})]});return(0,n.jsxs)("div",{className:b().container,children:[(0,n.jsxs)("div",{className:b().header,style:{display:"flex",alignItems:"flex-start",justifyContent:"space-between",padding:"0px",backgroundColor:"#1a1a1a",borderRadius:"0px",margin:"0 0 20px 0",position:"relative"},children:[r&&(0,n.jsxs)("div",{style:{color:"#fff",fontWeight:"bold",fontSize:"1.1rem",position:"absolute",left:"-625px",top:"-15px",display:"flex",alignItems:"center"},children:[(0,n.jsx)("span",{style:{marginRight:"4px"},children:"Welcome:"}),(0,n.jsx)("span",{children:r})]}),(0,n.jsxs)("div",{style:{marginLeft:"auto"},children:[" ",(0,n.jsxs)("button",{onClick:T,className:"".concat(b().button," ").concat(b().logoutButton),children:[(0,n.jsx)(y,{size:16}),(0,n.jsx)("span",{children:"Logout"})]})]})]}),(0,n.jsx)("h1",{className:b().title,children:(0,n.jsx)("span",{className:b().kickLock,children:"KICK ~ LOCK"})}),(0,n.jsxs)("div",{className:b().formContainer,children:[(0,n.jsx)("div",{className:b().tabsContainer,children:[1,2,3,4,5].map(e=>(0,n.jsx)("button",{className:"".concat(b().tabButton," ").concat(t===e?b().activeTab:""),onClick:()=>a(e),children:I[e]},e))}),eu(1),eu(2),eu(3),eu(4),eu(5)]}),l&&(0,n.jsx)("div",{style:{position:"fixed",top:0,left:0,width:"100%",height:"100%",backgroundColor:"rgba(0, 0, 0, 0.7)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:1e3},children:(0,n.jsxs)("div",{style:{backgroundColor:"#1a1a1a",borderRadius:"8px",padding:"20px",width:"300px",boxShadow:"0 4px 20px rgba(0, 0, 0, 0.5)",border:"1px solid #333"},children:[(0,n.jsx)("h2",{style:{color:"#fff",marginBottom:"20px",textAlign:"center"},children:"Deploy KickLock"}),(0,n.jsx)("p",{style:{color:"#aaa",marginBottom:"20px",textAlign:"center",fontSize:"0.9rem"},children:"Deployment is required to use KickLock features"}),(0,n.jsx)("div",{style:{display:"flex",justifyContent:"center"},children:(0,n.jsx)("button",{onClick:L,disabled:d||j,style:{padding:"10px 20px",borderRadius:"4px",border:"none",backgroundColor:j?"#22c55e":"#d32f2f",color:"white",fontWeight:"bold",cursor:d||j?"not-allowed":"pointer",opacity:d?.7:1,transition:"all 0.3s ease",width:"100%"},children:d?"Deploying...":j?"Deployed":"Deploy KickLock"})})]})}),w&&(0,n.jsx)("div",{style:{position:"fixed",top:0,left:0,width:"100%",height:"100%",backgroundColor:"rgba(0, 0, 0, 0.7)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:1e3},children:(0,n.jsxs)("div",{style:{backgroundColor:"#1a1a1a",borderRadius:"8px",padding:"20px",width:"300px",boxShadow:"0 4px 20px rgba(0, 0, 0, 0.5)",border:"1px solid #333"},children:[(0,n.jsx)("h2",{style:{color:"#fff",marginBottom:"20px",textAlign:"center"},children:"Thank You for using KickLock"}),(0,n.jsx)("div",{style:{display:"flex",justifyContent:"center"},children:(0,n.jsx)("button",{onClick:async()=>{N(!1),await L()},style:{padding:"10px 20px",borderRadius:"4px",border:"none",backgroundColor:"#d32f2f",color:"white",fontWeight:"bold",cursor:"pointer",width:"100%"},children:"Deploy Again"})})]})})]})},v=(0,r.UU)("https://sarsafeqetopciqjhzrt.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InNhcnNhZmVxZXRvcGNpcWpoenJ0Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3MzIzNTAwOTEsImV4cCI6MjA0NzkyNjA5MX0.cvIbQn7UbCrvjDVzA4-bB-UCsHM9gp9i1uVFWtPlH9c");function j(){let e=(0,s.useSearchParams)(),t=(0,s.useRouter)(),a=e.get("username"),r=async()=>{let e=null,n=null,s=null;try{e=sessionStorage.getItem("userId"),n=sessionStorage.getItem("sessionId"),s=sessionStorage.getItem("username")}catch(e){t.push("/signin");return}if(a!==s){sessionStorage.clear(),i.oR.error("Invalid URL. Redirecting to signin..."),t.push("/signin");return}if(!e||!n){sessionStorage.clear(),t.push("/signin");return}let{data:o,error:r}=await v.from("users").select("id, username, active_session_id, token").eq("id",e).single();if((null==r?void 0:r.code)==="PGRST116"||!o){await l(s);return}if(r){i.oR.error("Session validation failed"),t.push("/signin");return}let{data:c,error:d}=await v.from("tokengenerate").select("status").eq("token",o.token).single();if(d||!c){await l(s);return}if(!o||o.active_session_id!==n||o.username!==a){sessionStorage.clear(),t.push("/signin"),i.oR.error("Session expired. Please sign in again.");return}},l=async e=>{if(e)try{await fetch("https://buddymaster77hugs-gradio.hf.space/api/undeploy",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({modal_name:e})})}catch(e){}sessionStorage.clear(),i.oR.error("User access has been revoked"),t.push("/signin")};return(0,o.useEffect)(()=>{if(!a){i.oR.error("Invalid URL. Redirecting to signin..."),t.push("/signin");return}r();let e=setInterval(r,5e3);return()=>clearInterval(e)},[t,a]),(0,n.jsxs)("div",{className:"min-h-screen flex flex-col items-center justify-center p-4 relative",children:[" ",(0,n.jsx)(i.N9,{position:"top-right",autoClose:3e3,hideProgressBar:!1,newestOnTop:!1,closeOnClick:!0,rtl:!1,pauseOnFocusLoss:!0,draggable:!0,pauseOnHover:!0,theme:"light"}),(0,n.jsx)(k,{})]})}function C(){return(0,n.jsx)(o.Suspense,{fallback:(0,n.jsxs)("div",{className:"min-h-screen flex items-center justify-center",children:[" ",(0,n.jsx)("div",{className:"text-white text-xl",children:"Loading..."})]}),children:(0,n.jsx)(j,{})})}}},e=>{var t=t=>e(e.s=t);e.O(0,[454,948,542,441,684,358],()=>t(1544)),_N_E=e.O()}]);