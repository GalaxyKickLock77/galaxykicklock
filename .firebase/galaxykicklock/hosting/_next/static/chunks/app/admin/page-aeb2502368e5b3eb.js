(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[698],{7220:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>d});var a=s(5155),r=s(2115),n=s(5695),l=s(6874),o=s.n(l);let i=(0,s(6302).UU)("https://sarsafeqetopciqjhzrt.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InNhcnNhZmVxZXRvcGNpcWpoenJ0Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3MzIzNTAwOTEsImV4cCI6MjA0NzkyNjA5MX0.cvIbQn7UbCrvjDVzA4-bB-UCsHM9gp9i1uVFWtPlH9c"),c={ADMIN_ID:"adminId",ADMIN_USERNAME:"adminUsername",ADMIN_SESSION_ID:"adminSessionId"};function d(){let e=(0,n.useRouter)(),[t,s]=(0,r.useState)(""),[l,d]=(0,r.useState)(""),[m,u]=(0,r.useState)(""),[h,x]=(0,r.useState)(!0);(0,r.useEffect)(()=>{(async()=>{try{let t=localStorage.getItem(c.ADMIN_ID),s=localStorage.getItem(c.ADMIN_USERNAME),a=localStorage.getItem(c.ADMIN_SESSION_ID);if(t&&s&&a){e.push("/admin/dashboard");return}let{data:r}=await i.auth.getSession();if(r&&r.session){e.push("/admin/dashboard");return}}catch(e){console.error("Error checking admin session:",e)}finally{x(!1)}})()},[e]);let p=async s=>{s.preventDefault(),u("");try{let{data:s,error:a}=await i.from("admin").select("*").eq("username",t).single();if(a){console.error("Error querying database:",a),u("An error occurred during login. Please try again.");return}if(!s||s.password!==l){u("Invalid username or password.");return}let r=g();localStorage.setItem(c.ADMIN_ID,s.id),localStorage.setItem(c.ADMIN_USERNAME,s.username),localStorage.setItem(c.ADMIN_SESSION_ID,r),e.push("/admin/dashboard")}catch(e){console.error("Error:",e),u("An unexpected error occurred.")}},g=()=>crypto.randomUUID();return h?(0,a.jsx)("div",{className:"min-h-screen bg-gray-900 text-white flex flex-col items-center justify-center",children:(0,a.jsx)("div",{className:"bg-gray-800 p-8 rounded-lg shadow-md w-96 text-center",children:(0,a.jsx)("p",{children:"Loading..."})})}):(0,a.jsx)("div",{className:"min-h-screen bg-gray-900 text-white flex flex-col items-center justify-center",children:(0,a.jsxs)("div",{className:"bg-gray-800 p-8 rounded-lg shadow-md w-96",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold mb-4 text-center",children:"Admin Login"}),(0,a.jsxs)("form",{onSubmit:p,children:[(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsx)("label",{htmlFor:"username",className:"block text-gray-400 text-sm font-bold mb-2",children:"Username"}),(0,a.jsx)("input",{type:"text",id:"username",className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",value:t,onChange:e=>s(e.target.value)})]}),(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsx)("label",{htmlFor:"password",className:"block text-gray-400 text-sm font-bold mb-2",children:"Password"}),(0,a.jsx)("input",{type:"password",id:"password",className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",value:l,onChange:e=>d(e.target.value)})]}),(0,a.jsx)("button",{type:"submit",className:"bg-purple-500 hover:bg-purple-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline",children:"Sign In"})]}),m&&(0,a.jsx)("div",{className:"text-red-500 text-sm mt-2",children:m}),(0,a.jsx)("div",{className:"mt-4 text-center",children:(0,a.jsxs)("p",{className:"text-gray-400 text-sm",children:["Not an admin?"," ",(0,a.jsx)(o(),{href:"/",className:"text-purple-500 hover:underline",children:"Go back to the main page"})]})}),(0,a.jsx)("div",{className:"mt-4 text-center",children:(0,a.jsxs)("p",{className:"text-gray-400 text-sm",children:["Forgot Password?"," "]})})]})})}},8345:(e,t,s)=>{Promise.resolve().then(s.bind(s,7220))}},e=>{var t=t=>e(e.s=t);e.O(0,[948,874,441,684,358],()=>t(8345)),_N_E=e.O()}]);